******************************************************************************
    MICRO C CUBE / STANDARD, SAMPLE
    Atmark Techno Armadillo-440 向けサンプルプログラム
    Copyright (c)  2010-2011, eForce Co., Ltd. All rights reserved.
******************************************************************************

・本ファイルは、サンプルプログラムの概要、及び専用デバイスドライバを含む場合は
  その概要、そのほか、更新履歴などの情報を記述しています。


１．サンプルプログラムの概要
------------------------------------------------------------------------------
LEDを一定周期で点滅させ、シアルポートでは受信したキャラクタを送信するサンプル
プログラムです。

・メインタスク MainTask()
2つのLED使用できるように端子を初期化し、その後は200msec間隔でサブタスクを起動
します。

・サブタスク SubTask()
緑と赤のLEDの点灯反転し、100msec後に再び反転し、タスクを停止します。

・送受信タスク ComTask()
UART2のシリアルチャネルに必要な端子を初期化し、メッセージを出力します。その後、
一文字ずつ受信と送信を繰り返します。
通信条件：ボーレート115200BPS,データ8Bit,XON/XOFFソフトウェアフロー制御


２．ロードモジュールの生成までの手順
------------------------------------------------------------------------------
IAR Embedded Workbenchによりロードモジュールを生成します。

・ワークスペースを開く
ワークスペースファイル Armadillo-440.ewwをダブルクリックし、EWARMを起動すると同
時にワークスペースを開きます。

・プロジェクトをアクティブにする
ワークスペースには、デバッグ用に２つのプロジェクトが作成されています。Thumbス
テートを使用した"ThumbLittle"とARMステートのみの"ARMLittle"です。各のプロジェ
クトには"Debug"と"Flash"の2つのコンフィグレーションがあります。
ワークスペースウィンドウでプロジェクト名が太字で強調されている方がアクティブ
で、使用したいプロジェクトがアクティブになっていない場合はアクティブにします。

・ビルドする
"メイク"ボタンをクリックするとコンパイル／リンクが行われ、プロジェクト名のフォ
ルダに、ロードモジュールのプロジェクト名.outが生成されます。


３．ロードモジュールのダウンロードと実行
------------------------------------------------------------------------------
JTAGエミュレータJ-Linkにより、ロードモジュールをダウンロードし、そのプログラム
を実行します。

・JTAGエミュレータの接続
ターゲットボードにJ-LinkのJTAGコネクタを接続し、ターゲットボードの電源をONにし
ます。

・プログラムの実行
"Debug"コンフィグレーションを選択した状態で"ダウンロードしてデバッグ"ボタンを
クリックすると、生成されたロードモジュールがSDRAMにダウンロードされ、main()ま
で実行されて一旦止まります。"実行"ボタンを押すとプログラムは続行します。

・Flashメモリへのダウンロード
J-Linkを外してプログラムを実行させるには、予めFlashメモリへロードモジュールを
書き込みます。"Flash"コンフィグレーションを選択した状態で"ダウンロードしてデ
バッグ"ボタンをクリックすると、Flashメモリへの書き込みが行われます。


４．PALMiCE3によるダウンロードと実行
------------------------------------------------------------------------------
JTAGエミュレータPALMiCE3により、ロードモジュールをダウンロードし、そのプログ
ラムを実行します。

・JTAGエミュレータの接続
ターゲットボードにPALMiCE3のJTAGコネクタを接続し、PALMiCE3とターゲットボード
の電源を順番にONにします。

・デバッガの起動とダウンロード
csideP3.cpfをダブルクリックし、デバッガ CSIDE for PALMiCE3 ARMを起動します。
初期化後、登録されたロードモジュールがSDRAMにダウンロードされます。デフォルト
はプロジェクト"ARMLittle"となっているため、プロジェクト"ThumbLittle"をデバッ
グする場合には、"ファイルロード"をクリックし"ThumbLittle.out"側を選択します。

・プログラムの実行
"プログラム実行"ボタンをクリックし、ダウンロードされたプログラムを実行します。

・ROMでの実行
PALMiCE3を外してプログラムを実行させるには、Flashメモリにロードモジュールを
書き込みます。尚、オフセットアドレスとして0x20000000を指定しダウンロードする
ことにより、Flashへの書き込みが行われます。


５．更新履歴
------------------------------------------------------------------------------
    Version Information
            2010.11.01: Created.
            2011.06.22: IAR Embedded Workbench V6.10.05に対応
